<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  

  
  <title>T03 Introduction to BeaconBasedSgn | Navindoor MATLAB Toolbox</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="La clase BeaconsBasedSgn, es la evoluci&amp;oacute;n de la clase BBSLevel. Mientras que BBSLevel toma como variables de entrada un objeto traj y un objeto level, BeaconsBasedSgn toma como variables de ent">
<meta property="og:type" content="article">
<meta property="og:title" content="T03 Introduction to BeaconBasedSgn">
<meta property="og:url" content="http://yoursite.com/CT03_T03/index.html">
<meta property="og:site_name" content="Navindoor MATLAB Toolbox">
<meta property="og:description" content="La clase BeaconsBasedSgn, es la evoluci&amp;oacute;n de la clase BBSLevel. Mientras que BBSLevel toma como variables de entrada un objeto traj y un objeto level, BeaconsBasedSgn toma como variables de ent">
<meta property="og:locale" content="es">
<meta property="og:image" content="http://yoursite.com/images/CT03_Signals_Simulation/T03_Introduction_to_BeaconBasedSgn_01.png">
<meta property="og:updated_time" content="2018-06-21T09:35:41.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="T03 Introduction to BeaconBasedSgn">
<meta name="twitter:description" content="La clase BeaconsBasedSgn, es la evoluci&amp;oacute;n de la clase BBSLevel. Mientras que BBSLevel toma como variables de entrada un objeto traj y un objeto level, BeaconsBasedSgn toma como variables de ent">
<meta name="twitter:image" content="http://yoursite.com/images/CT03_Signals_Simulation/T03_Introduction_to_BeaconBasedSgn_01.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Navindoor MATLAB Toolbox</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="https://github.com/joroya/navindoor">GitHub</a>
        
          <a class="main-nav-link" href="https://github.com/joroya/navindoor/archive/master.zip">Download</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Buscar"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-examples/CT03_Signals_Simulation/T03_Introduction_to_BeaconBasedSgn" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/CT03_T03/" class="article-date">
  <time datetime="2018-06-21T09:35:41.000Z" itemprop="datePublished">2018-06-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Examples/">Examples</a>►<a class="article-category-link" href="/categories/Examples/CT03-Signals-Simulation/">CT03 Signals Simulation</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      T03 Introduction to BeaconBasedSgn
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>La clase <em>BeaconsBasedSgn</em>, es la evoluci&oacute;n de la clase <em>BBSLevel</em>. Mientras que <em>BBSLevel</em> toma como variables de entrada un objeto <em>traj</em> y un objeto <em>level</em>, <em>BeaconsBasedSgn</em> toma como variables de entrada un objeto <em>supertraj</em> y un objeto <em>build</em>. Tiene muchas similitudes, sin embargo el este &uacute;ltimo, se tiene valores de se&ntilde;al entre plantas</p>
<table>
<thead>
<tr>
<th>Input Vars</th>
<th>&nbsp;Mandotory/Optional</th>
<th>type</th>
<th>Options</th>
</tr>
</thead>
<tbody>
<tr>
<td>istraj</td>
<td>Mandatory</td>
<td>supertraj</td>
<td>-</td>
</tr>
<tr>
<td>ibuild</td>
<td>Mandatory</td>
<td>build</td>
<td>-</td>
</tr>
<tr>
<td>type</td>
<td>Mandatory</td>
<td>char</td>
<td>(‘RSS’,’ToF’,’AoA’)</td>
</tr>
</tbody>
</table>
<h2 id="Ejemplo-B-aacute-sico"><a href="#Ejemplo-B-aacute-sico" class="headerlink" title="Ejemplo B&aacute;sico"></a>Ejemplo B&aacute;sico</h2><pre class="line-numbers language-matlab"><code class="language-matlab">clear<span class="token punctuation">;</span>
<span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'data/builds/EI_UD_conn_AP_fakes.mat'</span><span class="token punctuation">)</span>
<span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'data/trajs/straj_in_conn_AP_fakes.mat'</span><span class="token punctuation">)</span>
whos
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>  Name          Size              Bytes  Class        Attributes

  building      1x1             1728061  build                  
  straj         1x1                   8  supertraj              


</code></pre><p>Antes de nada veamos como son nuestras variables de entrada. La variable <em>building</em>, es un edif&iacute;cio de 5 plantas,</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">building
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
building = 

  build with properties:

           levels: [1x5 level]
              len: 0
      connections: [1x12 wall]
    height_levels: [0 5 10 15 20]


</code></pre><p>Mientras que el objeto <em>straj</em> es una trayectoria dentro del edif&iacute;cio mecionado</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">straj
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
straj = 

  supertraj with properties:

             trajs: [1x5 traj]
       connections: [1x4 wall]
    dt_connections: [4.9000 12.3000 3.8000 0.7000]
               len: 5
                dt: 0
            dt_max: 0
           signals: {}
             label: []
       description: []


</code></pre><p>Para poder generar la se&ntilde;al, es necesario que la trayectoria tenga una velocidad asociada.</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">straj <span class="token operator">=</span> <span class="token function">velocity</span><span class="token punctuation">(</span>straj<span class="token punctuation">,</span>building<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Para crear un se&ntilde;al RSS de manera r&aacute;pida, simplemente escribimos.</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">RSS_sgn <span class="token operator">=</span> <span class="token function">BeaconBasedSgn</span><span class="token punctuation">(</span>straj<span class="token punctuation">,</span>building<span class="token punctuation">,</span><span class="token string">'RSS'</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
RSS_sgn = 

  BeaconBasedSgn with properties:

         BeaconBasedSgnLevels: [1x5 BeaconBasedSgnLevel]
                  intersignal: {1x4 cell}
                       dt_max: 189.2000
                    supertraj: [1x1 supertraj]
                        build: [1x1 build]
                        label: &#39;RSS Signal&#39;
                  description: []
                 sgn_function: @RSS_dflt
               parameters_sgn: {[2]}
      sgn_function_interlevel: @RSS_inter_dflt
    parameters_sgn_interlevel: {[2]}
                      beacons: {1x5 cell}
                           dt: 0.1000
                         type: &#39;RSS&#39;


</code></pre><p>Este objeto contiene una lista de clases <em>BBSLevel</em>, estas propiedades describen el recorrido de la trayectoria en cada planta.</p>
<p>Podemos extraer tables de cada nivel, donde el n&uacute;mero de columna es igual al n&uacute;mero de <em>beacons</em> en cada planta, mientras que las filas representan los distintos instantes de tiempo</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">tables <span class="token operator">=</span> <span class="token function">signal2table</span><span class="token punctuation">(</span>RSS_sgn<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
tables = 

  struct with fields:

       inlevel: {1x5 cell}
    interlevel: {1x4 cell}


</code></pre><p>Extraemos la tabla del primer tramo recorrido.</p>
<pre class="line-numbers language-matlab"><code class="language-matlab">tbl1 <span class="token operator">=</span> tables<span class="token punctuation">.</span>inlevel<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">tbl1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre><code>
ans =

  5x7 table

    time    beacon_001    beacon_002    beacon_003    beacon_004    beacon_005    beacon_006
    ____    __________    __________    __________    __________    __________    __________

      0      14.26        20.513        22.924        12.676        20.932         16.95    
    0.1     18.989        21.789        24.149        14.457        25.193        20.666    
    0.2     17.088        23.946        18.513        14.256        20.382        22.134    
    0.3     16.417        20.236        22.347         16.71        21.599        19.684    
    0.4     15.413        20.283         21.78        15.746        23.173        21.165    


</code></pre><p>Podemos ver gr&aacute;ficamente la se&ntilde;al recibida durante el primer tramo.</p>
<pre class="line-numbers language-matlab"><code class="language-matlab"><span class="token function">plot</span><span class="token punctuation">(</span>tbl1<span class="token punctuation">{</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>tbl1<span class="token punctuation">{</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'time(s)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'Attenuation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'RSS signal'</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="/images/CT03_Signals_Simulation/T03_Introduction_to_BeaconBasedSgn_01.png" alt=""></p>
<p>La clase <em>BeaconBasedSgn</em> cuenta con un m&eacute;todo que devuelve el valor en cada instante, simpre y cuando el valor del tiempo este definido dentro de la se&ntilde;al</p>
<pre class="line-numbers language-matlab"><code class="language-matlab"><span class="token function">step</span><span class="token punctuation">(</span>RSS_sgn<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
ans = 

  struct with fields:

          beacons: [1x6 beacon]
           values: [14.2602 20.5135 22.9236 12.6760 20.9315 16.9498]
    hight_beacons: [0 0 0 0 0 0]


</code></pre><p>Obtenemos la se&ntilde;al requerida</p>
<pre class="line-numbers language-matlab"><code class="language-matlab"><span class="token function">step</span><span class="token punctuation">(</span>RSS_sgn<span class="token punctuation">,</span><span class="token number">22.3</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
ans = 

  struct with fields:

          beacons: [1x6 beacon]
           values: [9.4463 18.1293 17.0600 15.3882 14.8404 13.3155]
    hight_beacons: [0 0 0 0 0 0]


</code></pre><p>Obtenemos la se&ntilde;al requerida en otro instante de tiempo</p>
<pre class="line-numbers language-matlab"><code class="language-matlab"><span class="token function">step</span><span class="token punctuation">(</span>RSS_sgn<span class="token punctuation">,</span><span class="token number">22.5</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
ans = 

  struct with fields:

          beacons: [1x6 beacon]
           values: [11.6901 16.9825 15.8645 15.6137 16.0217 10.9953]
    hight_beacons: [0 0 0 0 0 0]


</code></pre><p>Hemos encontrado un tramo sin se&ntilde;al, esto ocurre durante los cambios de planta</p>
<pre class="line-numbers language-matlab"><code class="language-matlab"><span class="token function">step</span><span class="token punctuation">(</span>RSS_sgn<span class="token punctuation">,</span><span class="token number">32.5</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>
ans = 

  struct with fields:

           values: []
          beacons: []
    hight_beacons: []


</code></pre><p>el n&uacute;mero de <em>beacons</em> que recibimos a cambiado, por lo que sabemos que hemos cambiado de planta</p>
<pre class="line-numbers language-matlab"><code class="language-matlab"><span class="token keyword">try</span>
    <span class="token function">step</span><span class="token punctuation">(</span>RSS_sgn<span class="token punctuation">,</span><span class="token number">1000.0</span><span class="token punctuation">)</span>
<span class="token keyword">catch</span> msg_error
     msg_error
<span class="token keyword">end</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>
msg_error = 

  MException with properties:

    identifier: &#39;&#39;
       message: &#39;The value of &#39;t&#39; is invalid. The parameter t must be lower that dt_max property of supertraj&#39;
         cause: {0x1 cell}
         stack: [7x1 struct]


</code></pre><p>Por &uacute;ltimo, si no salimos del rango de definici&oacute;n, generaremos un error.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/CT03_T03/" data-id="cjicxws6z00053os4daxkwfrm" class="article-share-link">Compartir</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/CT03_T04/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nuevo</strong>
      <div class="article-nav-title">
        
          T04 Introduction to BeaconFreeSgnLevel
        
      </div>
    </a>
  
  
    <a href="/CT03_T02/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Viejo</strong>
      <div class="article-nav-title">T02 Introduction to BeaconBasedSgnLevel</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorías</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Examples/">Examples</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Examples/CT01-Planimetry/">CT01 Planimetry</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Examples/CT02-Trayectories-Simulation/">CT02 Trayectories Simulation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Examples/CT03-Signals-Simulation/">CT03 Signals Simulation</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Examples/CT04-Signals-Processing/">CT04 Signals Processing</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Examples/CT05-Methods-Comparison/">CT05 Methods Comparison</a></li></ul></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Jesus Oroya<br>
      Construido por <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="https://github.com/joroya/navindoor" class="mobile-nav-link">GitHub</a>
  
    <a href="https://github.com/joroya/navindoor/archive/master.zip" class="mobile-nav-link">Download</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>